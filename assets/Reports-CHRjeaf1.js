import{r as c,h as ie,aK as A,s as g,j as t,aL as je,aM as Re,am as Ee,al as Oe,aN as Te,a2 as De,a6 as le,aD as Pe,aO as Ce,aP as Ae,aQ as qe,aR as Ie,an as Le,az as Fe,aS as He,z as q,aa as We}from"./index-Ba5jVD6p.js";import{R as Ke}from"./refresh-ccw-7aaP1mjM.js";import{R as $e,B as Be,C as Ge,X as Ue,Y as ze,T as Me,a as Xe}from"./BarChart-CG56lHO5.js";const Je=()=>{const[u,ne]=c.useState("SHIFT_REPORTS"),[I,oe]=c.useState([]),[y,L]=c.useState([]),[p,F]=c.useState([]),[H,W]=c.useState(!1),[K,$]=c.useState(""),[R,ce]=c.useState(""),B=ie(),G=B.split("/"),de=`${G[0]}/${G[1]}/01`,[j,U]=c.useState(de),[N,z]=c.useState(B),[D,ue]=c.useState(!0),[k,f]=c.useState(1),[E,ge]=c.useState(10),[_,M]=c.useState(null),[X,Y]=c.useState(""),[V,Q]=c.useState("count"),[be,J]=c.useState({LOGINS:{status:"checking"},WORK_ORDERS:{status:"checking"},PARTS:{status:"checking"},SHIFT_REPORTS:{status:"checking"},LAB_REPORTS:{status:"checking"},WAREHOUSE:{status:"checking"}}),Z={LOGINS:[{id:"user_name",label:"Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±",visible:!0},{id:"personnel_code",label:"Ú©Ø¯ Ù¾Ø±Ø³Ù†Ù„ÛŒ",visible:!0},{id:"action",label:"Ù†ÙˆØ¹ Ø¹Ù…Ù„ÛŒØ§Øª",visible:!0},{id:"created_at",label:"Ø²Ù…Ø§Ù†",visible:!0},{id:"ip_address",label:"Ø¢Ø¯Ø±Ø³ IP",visible:!0},{id:"details",label:"Ø¬Ø²Ø¦ÛŒØ§Øª",visible:!1}],WORK_ORDERS:[{id:"tracking_code",label:"Ú©Ø¯ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ",visible:!0},{id:"title",label:"Ø¹Ù†ÙˆØ§Ù†",visible:!0},{id:"requester",label:"Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ú©Ù†Ù†Ø¯Ù‡",visible:!0},{id:"created_at",label:"ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª",visible:!0},{id:"status",label:"ÙˆØ¶Ø¹ÛŒØª",visible:!0},{id:"equip_name",label:"ØªØ¬Ù‡ÛŒØ²",visible:!0},{id:"failure_desc",label:"Ø´Ø±Ø­ Ø®Ø±Ø§Ø¨ÛŒ",visible:!1}],PARTS:[{id:"tracking_code",label:"Ú©Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª",visible:!0},{id:"requester_name",label:"Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ú©Ù†Ù†Ø¯Ù‡",visible:!0},{id:"request_date",label:"ØªØ§Ø±ÛŒØ® Ø¯Ø±Ø®ÙˆØ§Ø³Øª",visible:!0},{id:"description",label:"ØªÙˆØ¶ÛŒØ­Ø§Øª/Ø¹Ù„Øª",visible:!0},{id:"work_order_code",label:"Ø¯Ø³ØªÙˆØ± Ú©Ø§Ø±",visible:!0},{id:"status",label:"ÙˆØ¶Ø¹ÛŒØª",visible:!0}],SHIFT_REPORTS:[{id:"tracking_code",label:"Ú©Ø¯ Ú¯Ø²Ø§Ø±Ø´",visible:!0},{id:"shift_date",label:"ØªØ§Ø±ÛŒØ®",visible:!0},{id:"shift_name",label:"Ø´ÛŒÙØª",visible:!0},{id:"supervisor_name",label:"Ø³Ø±Ù¾Ø±Ø³Øª Ø´ÛŒÙØª",visible:!0},{id:"total_production_a",label:"Ø®ÙˆØ±Ø§Ú© Ø®Ø· A",visible:!0},{id:"total_production_b",label:"Ø®ÙˆØ±Ø§Ú© Ø®Ø· B",visible:!0}],LAB_REPORTS:[{id:"tracking_code",label:"Ú©Ø¯ Ú¯Ø²Ø§Ø±Ø´",visible:!0},{id:"report_date",label:"ØªØ§Ø±ÛŒØ®",visible:!0},{id:"sample_code",label:"Ú©Ø¯ Ù†Ù…ÙˆÙ†Ù‡",visible:!0},{id:"fe_percent",label:"Fe %",visible:!0},{id:"feo_percent",label:"FeO %",visible:!0},{id:"s_percent",label:"S %",visible:!0}],WAREHOUSE:[{id:"tracking_code",label:"Ú©Ø¯ Ø±Ù‡Ú¯ÛŒØ±ÛŒ",visible:!0},{id:"report_date",label:"ØªØ§Ø±ÛŒØ®",visible:!0},{id:"type",label:"Ù†ÙˆØ¹ ØªØ±Ø§Ú©Ù†Ø´",visible:!0},{id:"part_name",label:"Ù†Ø§Ù… Ú©Ø§Ù„Ø§",visible:!0},{id:"qty",label:"ØªØ¹Ø¯Ø§Ø¯",visible:!0},{id:"receiver_name",label:"ØªØ­ÙˆÛŒÙ„ Ú¯ÛŒØ±Ù†Ø¯Ù‡",visible:!0}]},ee={LOGINS:[],WORK_ORDERS:[],PARTS:[],SHIFT_REPORTS:["total_production_a","total_production_b"],LAB_REPORTS:["fe_percent","feo_percent","s_percent"],WAREHOUSE:["qty"]},me=e=>e==="LOGINS"?"Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ Ùˆ Ø®Ø±ÙˆØ¬":e==="WORK_ORDERS"?"Ø¯Ø³ØªÙˆØ± Ú©Ø§Ø±Ù‡Ø§":e==="PARTS"?"Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù‚Ø·Ø¹Ù‡":e==="SHIFT_REPORTS"?"Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø´ÛŒÙØª":e==="LAB_REPORTS"?"Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡":"ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø¨Ø§Ø±",he=e=>{var a;const r=(a=be[e])==null?void 0:a.status;return r==="ok"?"ğŸŸ¢":r==="error"?"ğŸ”´":"ğŸŸ¡"};c.useEffect(()=>{const e=ie(),r=e.split("/");U(`${r[0]}/${r[1]}/01`),z(e),M(null);const a=Z[u];F(a),Y(u==="LOGINS"||u==="WORK_ORDERS"?"created_at":u==="PARTS"?"request_date":u==="SHIFT_REPORTS"?"shift_date":"report_date");const s=ee[u];Q(i=>i==="count"||s.includes(i)?i:"count"),te()},[u]),c.useEffect(()=>{re()},[]);const P=(e,r=!1)=>{const a=(e==null?void 0:e.created_at)||(e==null?void 0:e.createdAt)||(e==null?void 0:e.timestamp)||(e==null?void 0:e.at)||(e!=null&&e.date&&(e!=null&&e.time)?`${e.date} ${e.time}`:(e==null?void 0:e.date)||"");if(!a)return"";const n=new Date(a);if(Number.isNaN(n.getTime()))return String(a);if(r){const s=n.toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),i=n.toLocaleDateString("fa-IR");return`${s}ï½œ${i}`}return n.toLocaleString("fa-IR")},C=e=>e==null?"":typeof e=="string"||typeof e=="number"||typeof e=="boolean"?String(e):Array.isArray(e)?e.map(C).join(" "):typeof e=="object"?Object.values(e).map(C).join(" "):"";c.useEffect(()=>{var r,a;let e=I;if(R){const n=R.toLowerCase();e=e.filter(s=>C(s).toLowerCase().includes(n))}if(j||N){const n=j?((r=A(j))==null?void 0:r.getTime())??0:0,s=N?((a=A(N))==null?void 0:a.getTime())??1/0:1/0,i=o=>o+24*60*60*1e3-1;e=e.filter(o=>{const h=o._dateForFilter;return!(isNaN(h)||n&&h<n||N&&h>i(s))})}L(e),f(1)},[R,j,N,I]);const te=async()=>{W(!0),$("");let e=[];try{switch(u){case"LOGINS":const{data:s,error:i}=await g.from("system_logs").select("*");if(i)throw String(i.message||"").includes("relation")||i.code==="42P01"?new Error("Ø¬Ø¯ÙˆÙ„ system_logs Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯. Ù„Ø·ÙØ§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø®Øª/Ù…Ù‡Ø§Ø¬Ø±Øª Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯."):i;e=(s||[]).map(l=>({user_name:l.user_name||l.userName||l.username||"-",personnel_code:l.personnel_code||l.personnelCode||"-",action:l.action||l.event||"-",created_at:P(l,!0),ip_address:l.ip_address||l.ip||"-",details:l.details||l.description||""})).sort((l,x)=>{const b=new Date(l.created_at).getTime(),w=new Date(x.created_at).getTime();return Number.isNaN(b)&&Number.isNaN(w)?0:Number.isNaN(b)?1:Number.isNaN(w)?-1:w-b});break;case"WORK_ORDERS":{const{data:l,error:x}=await g.from("work_orders").select("tracking_code, request_date, requester_name, status, equipment_name, failure_description, created_at").order("created_at",{ascending:!1});if(!x){e=(l||[]).map(d=>({tracking_code:d.tracking_code||"-",title:d.equipment_name||"-",requester:d.requester_name||"-",created_at:P(d)||d.request_date||"-",status:d.status==="DONE"||d.status==="FINISHED"?"ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡":d.status==="REQUEST"?"Ø¯Ø±Ø®ÙˆØ§Ø³Øª":"Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…",equip_name:d.equipment_name||"-",failure_desc:d.failure_description||"-"}));break}const{data:b,error:w}=await g.from("cartable_items").select("tracking_code, title, created_at, status, data").eq("module","WORK_ORDER").order("created_at",{ascending:!1});if(w)throw w;e=(b||[]).map(d=>{const T=d.data||{};return{tracking_code:d.tracking_code,title:d.title,requester:T.requester||"-",created_at:P(d),status:d.status==="DONE"?"ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡":"Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…",equip_name:T.equipName||T.equipLocalName||"-",failure_desc:T.failureDesc||"-"}})}break;case"PARTS":const{data:o,error:h}=await g.from("part_requests").select("tracking_code, requester_name, request_date, description, work_order_code, status").order("created_at",{ascending:!1});if(h)throw h;e=(o||[]).map(l=>({...l,status:l.status==="PENDING"?"Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯":l.status==="REJECTED"?"Ø±Ø¯ Ø´Ø¯Ù‡":"ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡"}));break;case"SHIFT_REPORTS":const{data:m,error:S}=await g.from("shift_reports").select("tracking_code, shift_date, shift_name, supervisor_name, total_production_a, total_production_b").order("created_at",{ascending:!1});if(S)throw S;e=m||[];break;case"LAB_REPORTS":const{data:ke,error:se}=await g.from("lab_reports").select("tracking_code, report_date, sample_code, fe_percent, feo_percent, s_percent").order("created_at",{ascending:!1});if(se)throw se;e=ke||[];break;case"WAREHOUSE":const{data:Se,error:we}=await g.from("warehouse_reports").select("tracking_code, report_date, type, qty, receiver_name, parts(name)").order("created_at",{ascending:!1});if(we){const{data:l,error:x}=await g.from("warehouse_reports").select("tracking_code, report_date, type, qty, receiver_name").order("created_at",{ascending:!1});if(x)throw x;e=(l||[]).map(b=>({tracking_code:b.tracking_code,report_date:b.report_date,type:b.type==="ENTRY"?"ÙˆØ±ÙˆØ¯":b.type==="EXIT"?"Ø®Ø±ÙˆØ¬":b.type||"-",qty:b.qty,receiver_name:b.receiver_name,part_name:"---"}));break}e=(Se||[]).map(l=>{var x;return{tracking_code:l.tracking_code,report_date:l.report_date,type:l.type==="ENTRY"?"ÙˆØ±ÙˆØ¯":l.type==="EXIT"?"Ø®Ø±ÙˆØ¬":l.type||"-",qty:l.qty,receiver_name:l.receiver_name,part_name:((x=l.parts)==null?void 0:x.name)||"---"}});break}}catch(s){console.error("Error fetching report data:",s),$((s==null?void 0:s.message)||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú¯Ø²Ø§Ø±Ø´"),e=[]}finally{W(!1)}const r=u==="LOGINS"||u==="WORK_ORDERS"?"created_at":u==="PARTS"?"request_date":u==="SHIFT_REPORTS"?"shift_date":"report_date",a=s=>s.replace(/[Û°-Û¹]/g,i=>String("Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹".indexOf(i))),n=e.map(s=>{var h;const i=s[r];let o=NaN;if(i){let m=typeof i=="string"?i:String(i);m.includes("ï½œ")&&(m=((h=m.split("ï½œ")[1])==null?void 0:h.trim())||m),m=a(m);const S=/^\d{4}\/\d{1,2}\/\d{1,2}/.test(m)?A(m):new Date(i);o=S&&!isNaN(S.getTime())?S.getTime():NaN}return{...s,_dateForFilter:o}});oe(n),L(n)},xe=async e=>{try{switch(e){case"LOGINS":{const{error:r}=await g.from("system_logs").select("*").limit(1);if(r)throw r;return{status:"ok"}}case"WORK_ORDERS":{const{error:r}=await g.from("work_orders").select("id").limit(1);if(r){const{error:a}=await g.from("cartable_items").select("id").eq("module","WORK_ORDER").limit(1);if(a)throw a}return{status:"ok"}}case"PARTS":{const{error:r}=await g.from("part_requests").select("id").limit(1);if(r)throw r;return{status:"ok"}}case"SHIFT_REPORTS":{const{error:r}=await g.from("shift_reports").select("id").limit(1);if(r)throw r;return{status:"ok"}}case"LAB_REPORTS":{const{error:r}=await g.from("lab_reports").select("id").limit(1);if(r)throw r;return{status:"ok"}}case"WAREHOUSE":{const{error:r}=await g.from("warehouse_reports").select("id").limit(1);if(r)throw r;return{status:"ok"}}default:return{status:"error",message:"Unknown source"}}}catch(r){return{status:"error",message:(r==null?void 0:r.message)||"Ø®Ø·Ø§ÛŒ Ø§ØªØµØ§Ù„"}}},re=async()=>{J({LOGINS:{status:"checking"},WORK_ORDERS:{status:"checking"},PARTS:{status:"checking"},SHIFT_REPORTS:{status:"checking"},LAB_REPORTS:{status:"checking"},WAREHOUSE:{status:"checking"}});const e=["LOGINS","WORK_ORDERS","PARTS","SHIFT_REPORTS","LAB_REPORTS","WAREHOUSE"],r=await Promise.all(e.map(async a=>({source:a,health:await xe(a)})));J(a=>{const n={...a};return r.forEach(({source:s,health:i})=>{n[s]=i}),n})},pe=e=>{F(r=>r.map(a=>a.id===e?{...a,visible:!a.visible}:a))},fe=()=>{if(y.length===0)return alert("Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯");const e=p.filter(s=>s.visible),r=y.map(s=>{const i={};return e.forEach(o=>{i[o.label]=s[o.id]||"-"}),i}),a=q.json_to_sheet(r),n=q.book_new();q.book_append_sheet(n,a,"Report"),We(n,`report_${u}_${Date.now()}.xlsx`)},_e=()=>{var n;if(y.length===0)return[];const e=X||((n=p[0])==null?void 0:n.id)||"report_date",r=V,a={};return y.forEach(s=>{const i=String(s[e]??"Ù†Ø§Ù…Ø´Ø®Øµ");if(r==="count")a[i]=(a[i]||0)+1;else{const o=Number(s[r]);a[i]=(a[i]||0)+(isNaN(o)?0:o)}}),Object.keys(a).map(s=>({name:s,count:a[s]})).slice(0,15)},ye=e=>{M(r=>(r==null?void 0:r.key)===e?{key:e,direction:r.direction==="asc"?"desc":"asc"}:{key:e,direction:"asc"}),f(1)},ve=[...y].sort((e,r)=>{if(!_)return 0;const a=e[_.key],n=r[_.key],s=Number(a),i=Number(n);let o=0;return!isNaN(s)&&!isNaN(i)?o=s-i:o=String(a??"").localeCompare(String(n??""),"fa"),_.direction==="asc"?o:-o}),v=Math.ceil(y.length/E)||1,O=(k-1)*E,ae=ve.slice(O,O+E),Ne=e=>{let r=parseInt(e.target.value);(isNaN(r)||r<1)&&(r=1),r>v&&(r=v),f(r)};return t.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[K&&t.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 text-red-700 px-4 py-3 text-sm",children:K}),t.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded-lg shadow-sm",children:t.jsx(je,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Ú¯Ø²Ø§Ø±Ø´â€ŒØ³Ø§Ø² Ù¾ÙˆÛŒØ§"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ø³Ø§Ø®ØªØŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ùˆ Ø®Ø±ÙˆØ¬ÛŒ Ú¯Ø±ÙØªÙ† Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…"})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-stretch",children:[t.jsx("div",{className:"lg:col-span-1 flex flex-col",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-100 dark:border-gray-700 flex-1 flex flex-col",children:[t.jsxs("div",{className:"space-y-4 flex-1",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Ù…Ù†Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡"}),t.jsx("select",{value:u,onChange:e=>ne(e.target.value),className:"w-full p-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg outline-none text-sm",children:Object.keys(Z).map(e=>t.jsx("option",{value:e,children:`${he(e)} ${me(e)}`},e))})]}),t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>ue(!D),className:"flex items-center justify-between w-full text-xs font-bold text-gray-500 mb-2 hover:text-primary transition",children:["Ø§Ù†ØªØ®Ø§Ø¨ Ø³ØªÙˆÙ†â€ŒÙ‡Ø§",D?t.jsx(Re,{className:"w-3 h-3"}):t.jsx(Ee,{className:"w-3 h-3"})]}),D&&t.jsx("div",{className:"space-y-1 bg-gray-50 dark:bg-gray-700/50 p-2 rounded-lg max-h-60 overflow-y-auto",children:p.map(e=>t.jsxs("div",{onClick:()=>pe(e.id),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 p-1 rounded",children:[e.visible?t.jsx(Oe,{className:"w-4 h-4 text-primary"}):t.jsx(Te,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-sm",children:e.label})]},e.id))})]})]}),t.jsxs("div",{className:"flex gap-2 mt-auto pt-4",children:[t.jsxs("button",{onClick:async()=>{await re(),await te()},className:"flex-1 py-2 bg-blue-50 text-blue-600 rounded-lg flex items-center justify-center gap-2 hover:bg-blue-100 transition text-sm font-bold",children:[t.jsx(Ke,{className:`w-4 h-4 ${H?"animate-spin":""}`})," Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ"]}),t.jsxs("button",{onClick:fe,className:"flex-1 py-2 bg-green-50 text-green-600 rounded-lg flex items-center justify-center gap-2 hover:bg-green-100 transition text-sm font-bold",children:[t.jsx(De,{className:"w-4 h-4"})," Ø§Ú©Ø³Ù„"]})]})]})}),t.jsx("div",{className:"lg:col-span-3 flex flex-col",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm pl-2 pr-3 py-4 border border-gray-100 dark:border-gray-700 flex-1 flex flex-col min-h-0",children:[t.jsx("h4",{className:"text-xs font-bold text-gray-500 mb-3 text-center shrink-0",children:"Ù†Ù…ÙˆØ¯Ø§Ø± ØªÙˆØ²ÛŒØ¹ ÙØ±Ø§ÙˆØ§Ù†ÛŒ"}),t.jsx("div",{className:"flex-1 min-h-0 w-full",children:t.jsx($e,{width:"100%",height:"100%",children:t.jsxs(Be,{data:_e(),margin:{top:10,right:8,bottom:50,left:8},children:[t.jsx(Ge,{strokeDasharray:"3 3",vertical:!1}),t.jsx(Ue,{dataKey:"name",fontSize:10,angle:-35,tickMargin:8,interval:0,tick:({x:e,y:r,payload:a})=>t.jsx("g",{transform:`translate(${Math.max(0,e-30)}, ${r+40})`,children:t.jsx("text",{textAnchor:"middle",fontSize:10,transform:"rotate(-35 0 0)",children:a.value})})}),t.jsx(ze,{fontSize:10,tickMargin:6,tick:({x:e,y:r,payload:a})=>t.jsx("g",{transform:`translate(${e-20}, ${r+3})`,children:t.jsx("text",{textAnchor:"end",fontSize:10,x:0,y:0,children:(a==null?void 0:a.value)??a})})}),t.jsx(Me,{}),t.jsx(Xe,{dataKey:"count",fill:"#800020",radius:[4,4,0,0]})]})})})]})}),t.jsx("div",{className:"lg:col-span-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col min-h-[820px] max-h-[calc(100vh-8rem)]",children:[t.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex flex-wrap items-center justify-between gap-3 bg-gray-50 dark:bg-gray-900",children:[t.jsx("h2",{className:"font-bold text-gray-700 dark:text-gray-200",children:"Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Ù…Ø­ÙˆØ± Ø§ÙÙ‚ÛŒ"}),t.jsx("select",{value:X,onChange:e=>Y(e.target.value),className:"p-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg text-sm outline-none min-w-[120px]",children:p.map(e=>t.jsx("option",{value:e.id,children:e.label},e.id))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Ù…Ø­ÙˆØ± Ø¹Ù…ÙˆØ¯ÛŒ"}),t.jsxs("select",{value:V,onChange:e=>Q(e.target.value),className:"p-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg text-sm outline-none min-w-[120px]",children:[t.jsx("option",{value:"count",children:"ØªØ¹Ø¯Ø§Ø¯"}),ee[u].map(e=>{const r=p.find(a=>a.id===e);return r?t.jsxs("option",{value:e,children:["Ù…Ø¬Ù…ÙˆØ¹ ",r.label]},e):null})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Ø§Ø² ØªØ§Ø±ÛŒØ®"}),t.jsx(le,{value:j,onChange:U,disableFuture:!0})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"ØªØ§ ØªØ§Ø±ÛŒØ®"}),t.jsx(le,{value:N,onChange:z,disableFuture:!0})]}),t.jsxs("div",{className:"relative w-56",children:[t.jsx(Pe,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù†ØªØ§ÛŒØ¬...",value:R,onChange:e=>ce(e.target.value),className:"w-full pr-9 pl-4 py-1.5 text-sm bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg outline-none focus:ring-1 focus:ring-primary"})]})]})]}),t.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:t.jsxs("table",{className:"w-full text-right text-sm border-collapse",children:[t.jsx("thead",{className:"bg-orange-100 dark:bg-orange-900/30 text-gray-800 dark:text-gray-200 sticky top-0 z-10 shadow-sm",children:t.jsx("tr",{children:p.filter(e=>e.visible).map(e=>t.jsx("th",{className:"p-4 pl-10 pr-3 whitespace-nowrap cursor-pointer hover:text-primary select-none text-right align-middle min-w-[120px] border-l border-gray-200 dark:border-gray-600 last:border-l-0",onClick:()=>ye(e.id),children:t.jsxs("div",{className:"flex items-center justify-start gap-1 w-full",style:{direction:"rtl"},children:[e.label,t.jsx("span",{className:"text-gray-400 flex-shrink-0",children:(_==null?void 0:_.key)===e.id?_.direction==="asc"?t.jsx(Ce,{className:"w-3 h-3"}):t.jsx(Ae,{className:"w-3 h-3"}):t.jsx(qe,{className:"w-3 h-3 opacity-30"})})]})},e.id))})}),t.jsx("tbody",{className:"divide-y dark:divide-gray-600",children:ae.length>0?ae.map((e,r)=>t.jsx("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700/50 transition ${(O+r)%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-800/70"}`,children:p.filter(a=>a.visible).map(a=>t.jsx("td",{className:"p-4 whitespace-nowrap text-gray-700 dark:text-gray-200 border-l border-gray-200 dark:border-gray-600 last:border-l-0",children:e[a.id]||"-"},a.id))},O+r)):t.jsx("tr",{children:t.jsx("td",{colSpan:p.filter(e=>e.visible).length,className:"p-10 text-center text-gray-400",children:H?"Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª...":"Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯"})})})]})}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border-t dark:border-gray-700 p-4 flex flex-col md:flex-row justify-between items-center gap-4 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[t.jsx("span",{children:"Ù†Ù…Ø§ÛŒØ´"}),t.jsxs("select",{value:E,onChange:e=>{ge(Number(e.target.value)),f(1)},className:"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded p-1 outline-none",children:[t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"}),t.jsx("option",{value:200,children:"200"})]}),t.jsx("span",{children:"Ø±Ø¯ÛŒÙ Ø¯Ø± Ù‡Ø± ØµÙØ­Ù‡"}),t.jsxs("span",{className:"mr-2 px-2 border-r border-gray-300 dark:border-gray-600 font-bold",children:["Ù…Ø¬Ù…ÙˆØ¹: ",y.length," Ø±Ú©ÙˆØ±Ø¯"]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{disabled:k===1,onClick:()=>f(1),className:"p-2 border rounded-lg hover:bg-white dark:hover:bg-gray-700 disabled:opacity-30 transition bg-white dark:bg-gray-800 dark:border-gray-600",title:"Ø§ÙˆÙ„ÛŒÙ† ØµÙØ­Ù‡",children:t.jsx(Ie,{className:"w-4 h-4 rtl:rotate-180"})}),t.jsx("button",{disabled:k===1,onClick:()=>f(e=>e-1),className:"p-2 border rounded-lg hover:bg-white dark:hover:bg-gray-700 disabled:opacity-30 transition bg-white dark:bg-gray-800 dark:border-gray-600",title:"ØµÙØ­Ù‡ Ù‚Ø¨Ù„",children:t.jsx(Le,{className:"w-4 h-4 rtl:rotate-180"})}),t.jsxs("div",{className:"flex items-center gap-2 px-2",children:[t.jsx("span",{className:"text-sm font-medium",children:"ØµÙØ­Ù‡"}),t.jsx("input",{type:"number",min:1,max:v,value:k,onChange:Ne,className:"w-12 text-center p-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-sm font-bold outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Ø§Ø² ",v]})]}),t.jsx("button",{disabled:k>=v,onClick:()=>f(e=>e+1),className:"p-2 border rounded-lg hover:bg-white dark:hover:bg-gray-700 disabled:opacity-30 transition bg-white dark:bg-gray-800 dark:border-gray-600",title:"ØµÙØ­Ù‡ Ø¨Ø¹Ø¯",children:t.jsx(Fe,{className:"w-4 h-4 rtl:rotate-180"})}),t.jsx("button",{disabled:k>=v,onClick:()=>f(v),className:"p-2 border rounded-lg hover:bg-white dark:hover:bg-gray-700 disabled:opacity-30 transition bg-white dark:bg-gray-800 dark:border-gray-600",title:"Ø¢Ø®Ø±ÛŒÙ† ØµÙØ­Ù‡",children:t.jsx(He,{className:"w-4 h-4 rtl:rotate-180"})})]})]})]})})]})]})};export{Je as Reports,Je as default};
